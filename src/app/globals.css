@import "tailwindcss";
@import "./design-system.css";

/* Enable dark mode with class strategy for Tailwind v4 */
@custom-variant dark (&:where(.dark, .dark *));

/* =============================================================================
   LUNARA COSMIC PALETTE
   A blend of Cosmic Wilderness + Moonlit Altar for magical, kid-friendly design
   ============================================================================= */

/* Light mode - default */
:root {
  /* Night / Dark Backgrounds (used in dark mode, defined here for reference) */
  --night-900: #0D0F14;
  --night-800: #14171F;
  --night-700: #1C2029;
  --night-600: #252A36;
  --night-500: #2F3542;
  
  /* Moon / Light Backgrounds */
  --moon-50: #F5F3F0;
  --moon-100: #E8E4DF;
  --moon-200: #D6D0C8;
  --moon-300: #C0B8AD;
  
  /* Moonlit Altar Accent Colors */
  --candle-cream: #F5DCC8;
  --herbal-gold: #C8A86B;
  --midnight-bloom: #6E8A8A;
  --mystic-ember: #8B5A42;
  
  /* Celestial Teal - Primary Accent (from Moonlit Altar) */
  --celestial-100: #D4E8E9;
  --celestial-200: #B3D4D6;
  --celestial-300: #8AC0C3;
  --celestial-400: #5B9B9E;
  --celestial-500: #4A8689;
  --celestial-600: #3B7073;
  --celestial-700: #2D595C;
  
  /* Ember Gold - Stars, Achievements, Moons currency (from Cosmic Wilderness) */
  --ember-gold-100: #FFF4E0;
  --ember-gold-200: #FFE8B8;
  --ember-gold-300: #F5D98F;
  --ember-gold-400: #E8C766;
  --ember-gold-500: #D4A853;
  --ember-gold-600: #B88F42;
  --ember-gold-700: #9A7635;
  
  /* Cosmic Rust - CTAs, Energy, Warmth (from Cosmic Wilderness) */
  --cosmic-rust-100: #F2DDD5;
  --cosmic-rust-200: #E5BBA9;
  --cosmic-rust-300: #D4937B;
  --cosmic-rust-400: #C47A5E;
  --cosmic-rust-500: #B86A4B;
  --cosmic-rust-600: #A35A3D;
  --cosmic-rust-700: #8B4A32;
  
  /* Nebula Accents - Kid-friendly pops of color */
  --nebula-pink: #E5A8C0;
  --nebula-pink-light: #F5D3E0;
  --nebula-teal: #6BB8B8;
  --nebula-teal-light: #A8D8D8;
  --nebula-purple: #A896C8;
  --nebula-purple-light: #D0C5E0;
  --nebula-peach: #F0C9A8;

  /* Herbal (Green) Palette - Nature/Success */
  --herbal-50: #F4F9F6;
  --herbal-100: #E6F0EA;
  --herbal-200: #C8DECFC;
  --herbal-300: #A3C9AD;
  --herbal-400: #7FB08C;
  --herbal-500: #6F8F73; /* Matches --success */
  --herbal-600: #557359;
  --herbal-700: #3E5743;
  --herbal-800: #2C3E30;
  --herbal-900: #1D2920;

  /* Ember (Orange/Gold) Short Alias */
  --ember-50: var(--ember-gold-100); /* Use 100 as 50 is missing */
  --ember-100: var(--ember-gold-100);
  --ember-200: var(--ember-gold-200);
  --ember-300: var(--ember-gold-300);
  --ember-400: var(--ember-gold-400);
  --ember-500: var(--ember-gold-500);
  --ember-600: var(--ember-gold-600);
  --ember-700: var(--ember-gold-700);

  /* Solar (Bright Warmth) Alias to Ember Gold for now */
  --solar-50: var(--ember-gold-100);
  --solar-100: var(--ember-gold-100);
  --solar-200: var(--ember-gold-200);
  --solar-300: var(--ember-gold-300);
  --solar-400: var(--ember-gold-400);
  --solar-500: var(--ember-gold-500);
  --solar-600: var(--ember-gold-600);
  --solar-700: var(--ember-gold-700);
  
  /* Plum Scale - Rich purple-plum for mystical atmosphere */
  --plum-950: #1A0F1A;
  --plum-900: #251B25;
  --plum-850: #2D1F2D;
  --plum-800: #3A2838;
  --plum-700: #4A3545;
  --plum-600: #5C4355;
  
  /* =============================================================================
     OMBRÉ SURFACES — Plum → Teal (Moonlit Hearth)
     Use: large surfaces only (page/hero/sidebar/quest panels)
     ============================================================================= */

  /* Subtle page wash (works in light mode too) */
  --surface-wash: radial-gradient(
    ellipse at 20% 10%,
    rgba(91, 155, 158, 0.10) 0%,
    transparent 55%
  ),
  radial-gradient(
    ellipse at 80% 90%,
    rgba(168, 150, 200, 0.10) 0%,
    transparent 55%
  ),
  linear-gradient(
    135deg,
    var(--moon-50) 0%,
    var(--moon-100) 60%,
    var(--moon-200) 100%
  );

  /* Dark hero / header: plum core with teal lift */
  --surface-hero: radial-gradient(
    ellipse at 25% 0%,
    rgba(91, 155, 158, 0.22) 0%,
    transparent 55%
  ),
  radial-gradient(
    ellipse at 80% 80%,
    rgba(168, 150, 200, 0.18) 0%,
    transparent 60%
  ),
  linear-gradient(
    135deg,
    var(--plum-950) 0%,
    var(--plum-850) 45%,
    rgba(91, 155, 158, 0.14) 100%
  );

  /* Dark "quest panel": a touch warmer but still plum→teal */
  --surface-quest: radial-gradient(
    ellipse at 30% 10%,
    rgba(184, 106, 75, 0.14) 0%,
    transparent 55%
  ),
  radial-gradient(
    ellipse at 75% 85%,
    rgba(91, 155, 158, 0.18) 0%,
    transparent 60%
  ),
  linear-gradient(
    135deg,
    var(--plum-900) 0%,
    var(--plum-800) 55%,
    rgba(91, 155, 158, 0.12) 100%
  );

  /* Rewards: warm gold shimmer (use for streaks/level ups) */
  --surface-reward: linear-gradient(
    90deg,
    rgba(200, 168, 107, 0.30) 0%,
    rgba(212, 168, 83, 0.30) 50%,
    rgba(225, 200, 127, 0.30) 100%
  );
  
  /* Slate - Neutral tones (from Cosmic Wilderness) */
  --slate-100: #E8EAED;
  --slate-200: #D1D5DB;
  --slate-300: #9CA3AF;
  --slate-400: #6B7280;
  --slate-500: #4B5563;
  --slate-600: #374151;
  --slate-700: #1F2937;
  
  /* Semantic Colors */
  --success-light: #D1E7DD;
  --success: #6F8F73;
  --success-dark: #4E6B50;
  --warning-light: #FFF4E0;
  --warning: #E8C766;
  --warning-dark: #B88F42;
  --error-light: #F2DDD5;
  --error: #D48A8A;
  --error-dark: #B86A6A;
  --info-light: #D4E8E9;
  --info: #5B9B9E;
  --info-dark: #3B7073;
  
  /* Gradients - Ombré Magic */
  --gradient-cosmic: linear-gradient(135deg, #1C2029 0%, #14171F 50%, #0D0F14 100%);
  --gradient-ember: linear-gradient(90deg, #B86A4B 0%, #D4A853 100%);
  --gradient-ember-reverse: linear-gradient(90deg, #D4A853 0%, #B86A4B 100%);
  --gradient-nebula: linear-gradient(135deg, rgba(91, 155, 158, 0.15) 0%, rgba(156, 143, 184, 0.15) 100%);
  --gradient-aurora: linear-gradient(180deg, #5B9B9E 0%, #6BB8B8 50%, #9C8FB8 100%);
  --gradient-gold-shimmer: linear-gradient(90deg, #C49842 0%, #D4A853 50%, #E1C87F 100%);
  
  /* NEW: Full Cosmic Wilderness Ombré Gradients */
  --gradient-sunset: linear-gradient(135deg, #B86A4B 0%, #D4A853 50%, #E5A8C0 100%);
  --gradient-dusk: linear-gradient(135deg, #1C2029 0%, #4A5568 50%, #A896C8 100%);
  --gradient-ocean: linear-gradient(135deg, #5B9B9E 0%, #6BB8B8 100%);
  --gradient-forest: linear-gradient(135deg, #6F8F73 0%, #5B9B9E 100%);
  --gradient-rust-gold: linear-gradient(45deg, #B86A4B 0%, #D4A853 100%);
  --gradient-taupe-pink: linear-gradient(135deg, #A89B8C 0%, #E5A8C0 100%);
  --gradient-teal-pink: linear-gradient(135deg, #6BB8B8 0%, #E5A8C0 100%);
  --gradient-cosmic-glow: linear-gradient(135deg, #1C2029 0%, #2F3542 30%, #A896C8 100%);
  --gradient-warm: linear-gradient(135deg, #D4A853 0%, #B86A4B 50%, #E5A8C0 100%);
  --gradient-cool: linear-gradient(135deg, #5B9B9E 0%, #A896C8 50%, #E5A8C0 100%);
  
  /* Cross-palette: Moonlit Altar + Cosmic Wilderness */
  --gradient-altar-flame: linear-gradient(135deg, #F5DCC8 0%, #C8A86B 40%, #8B5A42 100%);
  --gradient-moonlit-dusk: linear-gradient(135deg, #6E8A8A 0%, #1C2029 100%);
  --gradient-candle-teal: linear-gradient(135deg, #F5DCC8 0%, #5B9B9E 100%);
  --gradient-herbal-bloom: linear-gradient(135deg, #C8A86B 0%, #6E8A8A 50%, #A896C8 100%);
  --gradient-mystic-night: linear-gradient(180deg, #8B5A42 0%, #1C2029 100%);
  
  /* Light Mode Semantic Mappings */
  --background: var(--moon-50);           /* Warm cream page background */
  --background-secondary: var(--moon-100); /* Secondary sections */
  --background-elevated: #FDFCFA;          /* Cards - warm but not pure white */
  --background-sidebar: var(--moon-100);   /* Sidebar in light mode */
  --foreground: #2B2B2B;
  --foreground-muted: var(--slate-400);    /* Use Slate for muted text */
  
  /* Border & Divider - use more color */
  --border: var(--slate-200);              /* Slate-tinted borders */
  --border-subtle: var(--moon-200);
  --border-accent: var(--celestial-300);   /* Teal accent borders */
  --divider: var(--slate-200);
  
  /* NEW: Palette Accent Colors for UI elements */
  --accent-primary: var(--celestial-500);  /* Celestial Teal - primary actions */
  --accent-secondary: var(--herbal-gold);  /* Herbal Gold - secondary accents */
  --accent-warm: var(--cosmic-rust-500);   /* Cosmic Rust - warm highlights */
  --accent-cool: var(--midnight-bloom);    /* Midnight Bloom - cool highlights */
  --accent-muted: var(--slate-400);        /* Slate - muted elements */
  
  /* Interactive states */
  --focus-ring: var(--celestial-400);
  --hover-overlay: rgba(0, 0, 0, 0.04);
  --btn-primary-bg: var(--cosmic-rust-500);    /* Cosmic Rust primary buttons */
  --btn-primary-hover: var(--cosmic-rust-600);
  --btn-secondary-bg: var(--celestial-500);    /* Celestial Teal secondary buttons */
  
  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --shadow-glow: 0 0 20px rgba(212, 168, 83, 0.3);
}

/* Dark mode - THE PRIMARY FOCUS */
html.dark,
.dark {
  /* BEAUTIFUL PURPLE-PLUM BACKGROUNDS - Softened for better contrast */
  --background: #12110F;                    /* Deep warm dark page bg */
  --background-secondary: #1C1918;          /* Secondary sections - lighter */
  --background-elevated: #2A2228;           /* Modals/Cards - Softer plum */
  --background-sidebar: #221E22;            /* Sidebar - Softer plum */
  --foreground: #e4d8c4;                    /* Candle Cream text */
  --foreground-muted: var(--slate-300);
  
  /* Border & Divider - Softened */
  --border: #3E3039;                        /* Softer purple-tinted border */
  --border-subtle: #322A30;
  --border-accent: var(--celestial-400);    /* Teal accent borders */
  --divider: #3E3039;
  
  /* Palette Accent Colors for UI elements */
  --accent-primary: var(--celestial-400);   /* Celestial Teal - primary actions */
  --accent-secondary: var(--herbal-gold);   /* Herbal Gold - secondary accents */
  --accent-warm: var(--cosmic-rust-400);    /* Cosmic Rust - warm highlights */
  --accent-cool: var(--midnight-bloom);     /* Midnight Bloom - cool highlights */
  --accent-muted: var(--slate-400);         /* Slate - muted elements */
  
  /* Interactive states */
  --hover-overlay: rgba(255, 255, 255, 0.04);
  --btn-primary-bg: var(--cosmic-rust-500);    /* Cosmic Rust primary buttons */
  --btn-primary-hover: var(--cosmic-rust-400);
  --btn-secondary-bg: var(--celestial-400);    /* Celestial Teal secondary buttons */
  
  /* Shadows with warm glow */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
  --shadow-glow: 0 0 30px rgba(200, 168, 107, 0.3);  /* Herbal Gold glow */
}

/* =============================================================================
   BASE STYLES
   ============================================================================= */

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-quicksand), 'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* =============================================================================
   MAGICAL BACKGROUNDS
   ============================================================================= */

/* Cosmic gradient background for immersive pages */
.bg-cosmic {
  background: var(--surface-wash);
  background-attachment: fixed;
  color: var(--foreground);
}

.dark .bg-cosmic,
html.dark .bg-cosmic {
  background: var(--surface-hero);
  background-attachment: fixed;
  color: var(--foreground);
}

/* Background with palette gradient (also for magical pages) */
.bg-magical {
  background: var(--surface-wash);
  background-attachment: fixed;
  color: var(--foreground);
}

.dark .bg-magical,
html.dark .bg-magical {
  background: var(--surface-quest);
  color: var(--foreground);
}

/* Starfield pattern overlay - only shows in dark mode */
.bg-starfield {
  position: relative;
  isolation: isolate; /* Create stacking context without affecting children */
}

/* Light mode: subtle warm texture */
.bg-starfield::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    radial-gradient(ellipse at 30% 20%, rgba(200, 168, 107, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 80%, rgba(91, 155, 158, 0.06) 0%, transparent 50%);
  pointer-events: none;
  z-index: -1; /* Behind content instead of requiring children to have z-index */
}

/* Dark mode: starfield with sparkles */
.dark .bg-starfield::before,
html.dark .bg-starfield::before {
  background-image: 
    radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.4) 0%, transparent 100%),
    radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.3) 0%, transparent 100%),
    radial-gradient(1px 1px at 50% 10%, rgba(255,255,255,0.5) 0%, transparent 100%),
    radial-gradient(1.5px 1.5px at 60% 50%, rgba(212,168,83,0.4) 0%, transparent 100%),
    radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,0.3) 0%, transparent 100%),
    radial-gradient(1px 1px at 80% 20%, rgba(255,255,255,0.4) 0%, transparent 100%),
    radial-gradient(1.5px 1.5px at 90% 60%, rgba(156,143,184,0.3) 0%, transparent 100%),
    radial-gradient(1px 1px at 10% 90%, rgba(255,255,255,0.3) 0%, transparent 100%),
    radial-gradient(1px 1px at 30% 50%, rgba(255,255,255,0.2) 0%, transparent 100%),
    radial-gradient(1px 1px at 85% 40%, rgba(255,255,255,0.3) 0%, transparent 100%);
}

/* Removed the .bg-starfield > * rule that was forcing position:relative on children */

/* Nebula glow effect */
.bg-nebula-glow {
  background: 
    radial-gradient(ellipse at 20% 80%, rgba(156, 143, 184, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(91, 155, 158, 0.1) 0%, transparent 50%),
    var(--gradient-cosmic);
}

/* =============================================================================
   GRADIENT UTILITIES
   ============================================================================= */

.bg-gradient-ember {
  background: var(--gradient-ember);
}

.bg-gradient-cosmic {
  background: var(--gradient-cosmic);
}

.bg-gradient-aurora {
  background: var(--gradient-aurora);
}

.bg-gradient-nebula {
  background: var(--gradient-nebula);
}

.bg-gradient-gold-shimmer {
  background: var(--gradient-gold-shimmer);
}

/* Text gradients */
.text-gradient-ember {
  background: var(--gradient-ember);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.text-gradient-aurora {
  background: var(--gradient-aurora);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Legacy support */
.bg-gradient-magic {
  background: var(--gradient-ember);
}

.text-gradient-magic {
  background: var(--gradient-ember);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* =============================================================================
   GLOW & SPECIAL EFFECTS
   ============================================================================= */

.glow-gold {
  box-shadow: var(--shadow-glow);
}

.glow-celestial {
  box-shadow:
    0 0 18px rgba(91, 155, 158, 0.28),
    0 0 42px rgba(91, 155, 158, 0.12);
}

.glow-nebula {
  box-shadow: 0 0 20px rgba(156, 143, 184, 0.4);
}

/* Animated gold shimmer for achievements */
@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.animate-shimmer {
  background: linear-gradient(90deg, 
    var(--ember-gold-500) 0%, 
    var(--ember-gold-300) 25%, 
    var(--ember-gold-400) 50%, 
    var(--ember-gold-300) 75%, 
    var(--ember-gold-500) 100%
  );
  background-size: 200% auto;
  animation: shimmer 3s linear infinite;
}

/* Twinkle animation for stars */
@keyframes twinkle {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

.animate-twinkle {
  animation: twinkle 2s ease-in-out infinite;
}

/* Pulse glow for notifications */
@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 10px rgba(212, 168, 83, 0.3); }
  50% { box-shadow: 0 0 25px rgba(212, 168, 83, 0.6); }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* =============================================================================
   UTILITY CLASSES
   ============================================================================= */

.avatar-shadow {
  width: 60%;
  height: 10px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 50%;
  filter: blur(2px);
}

/* SVG Title styling for better contrast */
.svg-title {
  filter: brightness(0.7) saturate(1.1) drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
}

.dark .svg-title,
html.dark .svg-title {
  filter: brightness(1.1) drop-shadow(0 1px 3px rgba(0, 0, 0, 0.4));
}

/* Accent color utilities using CSS variables */
.text-accent {
  color: var(--celestial-400);
}

.bg-accent {
  background-color: var(--celestial-400);
}

.border-accent {
  border-color: var(--celestial-400);
}

.text-gold {
  color: var(--ember-gold-400);
}

.bg-gold {
  background-color: var(--ember-gold-400);
}

/* =============================================================================
   KID ACCENT COLOR SYSTEM
   Per-kid customizable accent colors within the Lunara Cosmic palette
   ============================================================================= */

:root {
  /* Default kid accent (falls back to celestial teal) */
  --kid-accent: var(--celestial-400);
  --kid-accent-light: var(--celestial-200);
  --kid-accent-dark: var(--celestial-600);
}

/* Available kid accent options (set via data attribute or JS) */
[data-kid-accent="celestial"] {
  --kid-accent: var(--celestial-400);
  --kid-accent-light: var(--celestial-200);
  --kid-accent-dark: var(--celestial-600);
}

[data-kid-accent="nebula-teal"] {
  --kid-accent: var(--nebula-teal);
  --kid-accent-light: var(--nebula-teal-light);
  --kid-accent-dark: #4A9999;
}

[data-kid-accent="nebula-pink"] {
  --kid-accent: var(--nebula-pink);
  --kid-accent-light: var(--nebula-pink-light);
  --kid-accent-dark: #B8879A;
}

[data-kid-accent="nebula-purple"] {
  --kid-accent: var(--nebula-purple);
  --kid-accent-light: var(--nebula-purple-light);
  --kid-accent-dark: #7D7299;
}

[data-kid-accent="ember-gold"] {
  --kid-accent: var(--ember-gold-400);
  --kid-accent-light: var(--ember-gold-200);
  --kid-accent-dark: var(--ember-gold-600);
}

[data-kid-accent="cosmic-rust"] {
  --kid-accent: var(--cosmic-rust-400);
  --kid-accent-light: var(--cosmic-rust-200);
  --kid-accent-dark: var(--cosmic-rust-600);
}
